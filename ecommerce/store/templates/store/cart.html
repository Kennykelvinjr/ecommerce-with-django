{% extends 'base.html' %}
{% load static %}

{% block content %}
    <h1>Shopping Cart</h1>
    {% if items %}
        {% for item in items %}
        <div class="cart-item">
            <div class="item-info">
                <h4>{{ item.product.name }}</h4>
                <p>Price: TZS {{ item.product.price }}</p>
                <p>Subtotal: TZS {{ item.get_total }}</p>
            </div>
            <div class="item-actions">
                <form method="POST" action="{% url 'update_cart_item' item.id %}">
                    {% csrf_token %}
                    <button type="submit" name="action" value="decrease" class="btn btn-sm">-</button>
                </form>
                <span class="quantity">{{ item.quantity }}</span>
                <form method="POST" action="{% url 'update_cart_item' item.id %}">
                    {% csrf_token %}
                    <button type="submit" name="action" value="increase" class="btn btn-sm">+</button>
                </form>
                <form method="POST" action="{% url 'remove_cart_item' item.id %}">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-remove">Remove</button>
                </form>
            </div>
        </div>
        {% endfor %}
        <div class="cart-total">
            <h4>Total: TZS {{ order.get_cart_total }}</h4>
        </div>
        <a href="{% url 'store' %}" class="btn">Continue Shopping</a>
    {% else %}
        <p>Your cart is empty!</p>
        <a href="{% url 'store' %}" class="btn">Start Shopping</a>
    {% endif %}
{% endblock content %}